<!DOCTYPE html>
<html>
<head>
  <style>
  body{
    background-image:url("app/static/CoIA5G.jpg");
    background-repeat: no-repeat;
  background-size: auto;
  }
  </style>
  <meta charset="utf-8" />   <!-- <link rel="stylesheet" href="/static/bootstrap.min.css"> -->
  <link rel="shortcut icon" href="">
  <link rel="stylesheet" href="/static/main.css">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Archivo" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"> -->
  <!-- <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script> -->
  <!--Plugin CSS file with desired skin-->
   <link rel="stylesheet" href="/static/ion.rangeSlider.min.css"/>

   <!--jQuery-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

   <!--Plugin JavaScript file-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/js/ion.rangeSlider.min.js"></script>
</head>
<body>
  <!-- <form class="form-inline global-search"> -->
  <div class="container">
    <svg id ="back" class="total" width = "100%" height="680">
      <svg id="test" width="100%" height="680">
        <a xlink:href="/" style="cursor: pointer">
          <text x="11%" y="10%" text-anchor="middle" dominantBaseline="middle" opacity="1" fill="#E9E9E9" font-size="60px" font-family="Nunito">
            sellPhones
          </text>
        </a>
      </svg>
      <svg id="pink_section" width="60%" height ="680" x="20%">
        <rect id="rectangle" x="0" y="15%" width="100%" height="500" display="none" opacity="1" style="fill:#E9E9E9" rx="20" ry="20" />
        <foreignObject id="adv" width="100%" display="none" height="100%" x="0" y="15%" opacity="1">
          <form method="get">
            <input type = "hidden" name = "past3" value = "{{mate2}}" />
            <input type = "hidden" name = "past4" value = "{{check2}}" />
            <div class="topnav">

            <div id="slider2">
            <input type="text" class="js-range-slider" name="budgets" value="" />
          </div>
          <label class="check_container"  id="resolution2">
            <input name="feature" type="checkbox" value="ppi" {% if "ppi" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="size2">
            <input name="feature" type="checkbox" value="size" {% if "size" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <!-- <label class="check_container"  id="bezel2">
            <input name="feature" type="checkbox" value="bezel" {% if "bezel" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label> -->
          <label class="check_container"  id="thickness2">
            <input name="feature" type="checkbox" value="thickness" {% if "thickness" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="video2">
            <input name="feature" type="checkbox" value="video" {% if "video" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="rear2">
            <input name="feature" type="checkbox" value="rear camera" {% if "rear camera" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="front2">
            <input name="feature" type="checkbox" value="front camera" {% if "front camera" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="storage2">
            <input name="feature" type="checkbox" value="storage" {% if "storage" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="memory2">
            <input name="feature" type="checkbox" value="ram" {% if "ram" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="processor2">
            <input name="feature" type="checkbox" value="cpu" {% if "cpu" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="battery2">
            <input name="feature" type="checkbox" value="battery" {% if "battery" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>


          <label class="check_container"  id="finger2">
            <input name="feature" type="checkbox" value="finger" {% if "finger" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="face2">
            <input name="feature" type="checkbox" value="face" {% if "face" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="dual2">
            <input name="feature" type="checkbox" value="dual" {% if "dual" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="sd2">
            <input name="feature" type="checkbox" value="card slot" {% if "card slot" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="waterproof2">
            <input name="feature" type="checkbox" value="waterproof" {% if "waterproof" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="jack2">
            <input name="feature" type="checkbox" value="3.5mm jack" {% if "3.5mm jack" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="sim2">
            <input name="feature" type="checkbox" value="sim" {% if "sim" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="radio_container" id="radio_new2">
            <input name="condition" type="radio" name="radio" value="new" {% if condition =="new" %} checked='checked' {% endif %} required>
            <span class="radiomark"></span>
          </label>
          <label class="radio_container" id="radio_old2">
            <input name="condition" type="radio" name="radio" value="old" {% if condition =="old" %} checked='checked' {% endif %} required>
            <span class="radiomark"></span>
          </label>
            <script>
            if("{{budget}}" != "None"){
             $(".js-range-slider").ionRangeSlider({
                min: 0,
                max: 1500,
                from: {{budget}},
                prefix:"$",
                skin: "flat",
                grid: true
            });}
            else{
              $(".js-range-slider").ionRangeSlider({
                 min: 0,
                 max: 1500,
                 from: 800,
                 prefix:"$",
                 skin: "flat",
                 grid: true
             });
            }
            </script>
          </div>
          <input id="basic_text2" type="text" name="feature_text" placeholder="Type something..(optional)">
          <input id="brand_text" type="text" name="old_phone" placeholder="Old phone's brand and model">
          <button id="button_svg" width="100%" height="100%" type="submit" class="button">Search</button>

          </form>
        </foreignObject>
        <foreignObject id="advanced" width="100%" display="none" height="100%" x="0" y="15%" opacity="1">
          <form method="get">
            <input type = "hidden" name = "past" value = "{{mate}}" />
            <input type = "hidden" name = "past2" value = "{{check}}" />
            <div class="topnav">

            <div id="slider2">
            <input type="text" class="js-range-slider" name="budgets" value="" />
          </div>
          <label class="check_container"  id="resolution">
            <input name="feature" type="checkbox" value="ppi" {% if "ppi" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="quality">
            <input name="feature" type="checkbox" value="video" {% if "video" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="size">
            <input name="feature" type="checkbox" value="size" {% if "size" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="storage">
            <input name="feature" type="checkbox" value="battery" {% if "battery" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="fingerprint">
            <input name="feature" type="checkbox" value="storage" {% if "storage" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="face">
            <input name="feature" type="checkbox" value="finger" {% if "finger" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="check_container"  id="jack">
            <input name="feature" type="checkbox" value="3.5mm jack" {% if "3.5mm jack" in features %} checked='checked' {% endif %}>
            <span class="checkmark"></span>
          </label>
          <label class="radio_container" id="radio_new">
            <input name="condition" type="radio" name="radio" value="new" {% if condition =="new" %} checked='checked' {% endif %} required>
            <span class="radiomark"></span>
          </label>
          <label class="radio_container" id="radio_old">
            <input name="condition" type="radio" name="radio" value="old" {% if condition =="old" %} checked='checked' {% endif %} required>
            <span class="radiomark"></span>
          </label>
            <script>
            if("{{budget}}" != "None"){
             $(".js-range-slider").ionRangeSlider({
                min: 0,
                max: 1500,
                from: {{budget}},
                prefix:"$",
                skin: "flat",
                grid: true
            });}
            else{
              $(".js-range-slider").ionRangeSlider({
                 min: 0,
                 max: 1500,
                 from: 800,
                 prefix:"$",
                 skin: "flat",
                 grid: true
             });
            }
            </script>
          </div>
          <input id="basic_text" type="text" name="feature_text" placeholder="Type something..(optional)">

          <button id="button_svg" width="100%" height="100%" type="submit" class="button">Search</button>

          </form>
        </foreignObject>
      </svg>
      <svg id ="blue_section" width="0" height="680" x="38%">
      </svg>
    </svg>

    <!-- {% if data %}
    <meta id="my-data" data-playlist="{{ data }}">
    <h1>{{data}}</h1>
    {% endif %} -->
  </div>
  <script>
  let button_width = 150;
  let button_height = 60;
  let get_request = 0;
  let clicked = 0;

  function intro(){
    let svg = d3.select("#test");
    let height = svg.attr("height");
    let width = svg.attr("width");
    console.log("test");



    svg.append("g")
      .append("text")
      .text("find the perfect phone for you.")
      .attr("class","main")
      .attr("font-family", "Nunito")
      .attr("font-size", "35px")
      .attr("fill","#E9E9E9")
      .attr("text-anchor","middle")
      .attr("dominantBaseline","middle")
      .attr("x","50%")
      .attr("letter-spacing","2px")
      .attr("y", "40%");

    svg.append("g")
      .append("rect")
      .attr("class","main")
      .attr("class","main_rect2")
      .attr("width", button_width)
      .attr("height", button_height)
      .attr("rx",10)
      .attr("ry",10)
      .style("fill", "#E9E9E9")
      .attr("dominantBaseline","middle")
      .style("cursor","pointer")
      .attr("x","37%")
      .attr("y","46%")
      .on("click",function(){setupAdvanced();});

    svg.append("g")
      .append("rect")
      .attr("class","main")
      .attr("class","main_rect")
      .attr("width", button_width)
      .attr("height", button_height)
      .attr("rx",10)
      .attr("ry",10)
      .style("fill", "#E9E9E9")
      .attr("dominantBaseline","middle")
      .style("cursor","pointer")
      .attr("x","52%")
      .attr("y","46%")
      .on("click",function(){console.log("clicked");setup();});

    svg.append("g")
      .append("text")
      .text("Basic")
      .attr("class","main")
      .attr("font-family", "Nunito")
      .attr("font-size", "25px")
      .style("cursor","pointer")
      .attr("fill","#969696")
      .attr("text-anchor","middle")
      .attr("dominant-baseline","central")
      .attr("x","42%")
      .attr("opacity","1")
      .attr("y", "50.3%")
      .on("click",function(){setupAdvanced();});

    svg.append("g")
      .append("text")
      .attr("class","main_rect")
      .text("Advanced")
      .attr("class","main")
      .style("cursor","pointer")
      .attr("font-family", "Nunito")
      .attr("font-size", "25px")
      .attr("fill","#969696")
      .attr("text-anchor","middle")
      .attr("dominant-baseline","central")
      .attr("x","57.2%")
      .attr("opacity","1")
      .attr("y", "50.3%")
      .on("click",function(){console.log("clicked");setup();});

  }

  function setup(){

    d3.selectAll(".main")
      .transition()
      .duration(500)
      .style("opacity","0")
      .remove();

    console.log("test2");
    let svg = d3.select("#pink_section");
    let height = svg.attr("height");
    let width = svg.attr("width");


    svg.append("g")
    .append("text")
    .text("what else do you care about in your phone?")
    .attr("id","what_else")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    // .attr("textLength","300px")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",450);

    svg.append("g")
    .append("text")
    .text("current phone (optional)")
    .attr("id","current_phone")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","60%")
    .attr("y",450);


    svg.append("g")
    .append("line")
    .attr("id","budget_line")
    .attr("class","line2")
    .attr("x1","18%")
    .attr("x2","90%")
    .attr("y1","160")
    .attr("y2","160")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");

    svg.append("g")
    .append("text")
    .text("budget")
    .attr("id","budget")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",165);


    svg.append("g")
    .append("text")
    .text("features")
    .attr("id","features")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",265);

    svg.append("g")
    .append("line")
    .attr("id","feature_line")
    .attr("class","line2")
    .attr("x1","20%")
    .attr("x2","90%")
    .attr("y1","260")
    .attr("y2","260")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");



    svg.append("g")
      .append("text")
      .text("Screen Resolution")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Screen Size")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",320);

    // svg.append("g")
    //   .append("text")
    //   .text("Bezel Size")
    //   .attr("font-family", "Nunito")
    //   .attr("font-size","12px")
    //   .attr("fill","#969696")
    //   .attr("text-anchor","start")
    //   .attr("dominantBaseline","middle")
    //   .attr("x","11%")
    //   .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Thinness")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Video Quality")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Rear Camera")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("Front Camera")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",420);

    svg.append("g")
      .append("text")
      .text("Internal Storage")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Memory (RAM)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",320);

    svg.append("g")
      .append("text")
      .text("Processor (CPU)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Battery")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Fingerprint Sensor")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("Face Unlock")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",420);

    svg.append("g")
      .append("text")
      .text("Dual Camera")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("SD Card Slot")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",320);

    svg.append("g")
      .append("text")
      .text("Waterproof")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Audio Jack")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Dual SIM")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("newer (2018+)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","84%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("older")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","84%")
      .attr("y",320);

    d3.select("#basic_text2")
      .style("margin-left","11%")
      .style("margin-top","150px")
      .style("width","38%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");


    d3.select("#brand_text")
      .style("margin-left","5%")
      .style("margin-top","150px")
      .style("width","35%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");

    d3.select("#resolution2")
      .style("margin-left","25%")
      .style("margin-top","45px");

    d3.select("#size2")
      .style("margin-left","25%")
      .style("margin-top","70px");

    // d3.select("#bezel2")
    //   .style("margin-left","25%")
    //   .style("margin-top","95px");

    d3.select("#thickness2")
      .style("margin-left","25%")
      .style("margin-top","95px");

    d3.select("#video2")
      .style("margin-left","25%")
      .style("margin-top","120px");

    d3.select("#rear2")
      .style("margin-left","25%")
      .style("margin-top","145px");

    d3.select("#front2")
      .style("margin-left","25%")
      .style("margin-top","170px");

    d3.select("#storage2")
      .style("margin-left","45%")
      .style("margin-top","-125px");

    d3.select("#memory2")
      .style("margin-left","45%")
      .style("margin-top","195px");

    d3.select("#processor2")
      .style("margin-left","45%")
      .style("margin-top","220px");

    d3.select("#battery2")
      .style("margin-left","45%")
      .style("margin-top","245px");

    d3.select("#finger2")
      .style("margin-left","45%")
      .style("margin-top","270px");

    d3.select("#face2")
      .style("margin-left","45%")
      .style("margin-top","295px");

    d3.select("#dual2")
      .style("margin-left","65%")
      .style("margin-top","-250px");

    d3.select("#sd2")
      .style("margin-left","65%")
      .style("margin-top","320px");

    d3.select("#waterproof2")
      .style("margin-left","65%")
      .style("margin-top","345px");

    d3.select("#jack2")
      .style("margin-left","65%")
      .style("margin-top","370px");
    d3.select("#sim2")
      .style("margin-left","65%")
      .style("margin-top","395px");

    d3.select("#radio_new2")
    .style("margin-left","85%")
    .style("margin-top","-350px");

    d3.select("#radio_old2")
    .style("margin-left","85%")
    .style("margin-top","420px");

    d3.select("#pink_section")
      .style("opacity","0");

    d3.select("#pink_section")
      .transition()
      .duration(900)
      .style("opacity","1");
    d3.select("#rectangle")
      .transition()
      .duration(900)
      .style("display","initial");
    d3.select("#adv")
      .transition()
      .duration(900)
      .style("display","initial");
    console.log("help");
  }

  function setupAdvanced(){
    console.log("setupAdvanced");
    d3.selectAll(".main")
      .transition()
      .duration(500)
      .style("opacity","0")
      .remove();

    console.log("test2");
    let svg = d3.select("#pink_section");
    let height = svg.attr("height");
    let width = svg.attr("width");


    svg.append("g")
    .append("text")
    .text("what else do you care about in your phone?")
    .attr("id","condition")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    // .attr("textLength","300px")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",420);

    svg.append("g")
    .append("line")
    .attr("class","line2")
    .attr("id","text_line")
    .attr("x1","50%")
    .attr("x2","90%")
    .attr("y1","415")
    .attr("y2","415")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");


    svg.append("g")
    .append("line")
    .attr("id","budget_line")
    .attr("class","line2")
    .attr("x1","18%")
    .attr("x2","90%")
    .attr("y1","160")
    .attr("y2","160")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");

    svg.append("g")
    .append("text")
    .text("budget")
    .attr("id","budget")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",165);


    svg.append("g")
    .append("text")
    .text("features")
    .attr("id","features")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",265);

    svg.append("g")
    .append("line")
    .attr("id","feature_line")
    .attr("class","line2")
    .attr("x1","20%")
    .attr("x2","90%")
    .attr("y1","260")
    .attr("y2","260")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");



    svg.append("g")
      .append("text")
      .text("Screen Resolution")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Camera Quality")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",325);

    svg.append("g")
      .append("text")
      .text("Screen Size")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",355);

    svg.append("g")
      .append("text")
      .text("Battery")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",385);

    svg.append("g")
      .append("text")
      .text("Storage")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Fingerprint Sensor")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",325);

    svg.append("g")
      .append("text")
      .text("3.5mm Audio Jack")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",355);

    svg.append("g")
      .append("text")
      .text("newer (2018+)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","80%")
      .attr("y",290);

    svg.append("g")
      .append("text")
      .text("older")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","80%")
      .attr("y",320);

    d3.select("#basic_text")
      .style("margin-left","11%")
      .style("margin-top","125px")
      .style("width","78%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");

    d3.select("#resolution")
      .style("margin-left","30%")
      .style("margin-top","45px");

    d3.select("#quality")
      .style("margin-left","30%")
      .style("margin-top","75px");

    d3.select("#size")
      .style("margin-left","30%")
      .style("margin-top","105px");

    d3.select("#storage")
      .style("margin-left","30%")
      .style("margin-top","135px");

    d3.select("#fingerprint")
      .style("margin-left","60%")
      .style("margin-top","-90px");

    d3.select("#face")
      .style("margin-left","60%")
      .style("margin-top","165px");

    d3.select("#jack")
      .style("margin-left","60%")
      .style("margin-top","195px");

    d3.select("#radio_new")
    .style("margin-left","85%")
    .style("margin-top","-150px");

    d3.select("#radio_old")
    .style("margin-left","85%")
    .style("margin-top","225px");

    d3.select("#pink_section")
      .style("opacity","0");

    d3.select("#pink_section")
      .transition()
      .duration(900)
      .style("opacity","1");
    d3.select("#rectangle")
      .transition()
      .duration(900)
      .style("display","initial");
    d3.select("#advanced")
      .transition()
      .duration(900)
      .style("display","initial");
    console.log("help");
  }

  function shiftSetup(){

    console.log("test2");
    let svg = d3.select("#pink_section");
    let height = svg.attr("height");
    let width = svg.attr("width");


    svg.append("g")
    .append("text")
    .text("what else do you care about in your phone?")
    .attr("id","what_else")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    // .attr("textLength","300px")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",450);

    svg.append("g")
    .append("text")
    .text("current phone (optional)")
    .attr("id","current_phone")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    // .attr("textLength","300px")
    .attr("dominantBaseline","middle")
    .attr("x","60%")
    .attr("y",450);


    svg.append("g")
    .append("line")
    .attr("id","budget_line")
    .attr("class","line2")
    .attr("x1","18%")
    .attr("x2","90%")
    .attr("y1","160")
    .attr("y2","160")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");

    svg.append("g")
    .append("text")
    .text("budget")
    .attr("id","budget")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",165);


    svg.append("g")
    .append("text")
    .text("features")
    .attr("id","features")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",265);

    svg.append("g")
    .append("line")
    .attr("class","line2")
    .attr("id","feature_line")

    .attr("x1","20%")
    .attr("x2","90%")
    .attr("y1","260")
    .attr("y2","260")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");



    svg.append("g")
      .append("text")
      .text("Screen Resolution")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Screen Size")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",320);

    svg.append("g")
      .append("text")
      .text("Thinness")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Video Quality")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Rear Camera")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("Front Camera")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",420);

    svg.append("g")
      .append("text")
      .text("Internal Storage")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Memory (RAM)")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",320);

    svg.append("g")
      .append("text")
      .text("Processor (CPU)")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Battery")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Fingerprint Sensor")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("Face Unlock")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","31%")
      .attr("y",420);

    svg.append("g")
      .append("text")
      .text("Dual Camera")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("SD Card Slot")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",320);

    svg.append("g")
      .append("text")
      .text("Waterproof")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",345);

    svg.append("g")
      .append("text")
      .text("Audio Jack")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",370);

    svg.append("g")
      .append("text")
      .text("Dual SIM")
      .attr("class","features")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","51%")
      .attr("y",395);

    svg.append("g")
      .append("text")
      .text("newer (2018+)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","84%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("older")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","84%")
      .attr("y",320);

    d3.select("#basic_text2")
      .style("margin-left","11%")
      .style("margin-top","150px")
      .style("width","38%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");


    d3.select("#brand_text")
      .style("margin-left","5%")
      .style("margin-top","150px")
      .style("width","35%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");

    d3.select("#resolution2")
      .style("margin-left","25%")
      .style("margin-top","45px");

    d3.select("#size2")
      .style("margin-left","25%")
      .style("margin-top","70px");

    // d3.select("#bezel2")
    //   .style("margin-left","25%")
    //   .style("margin-top","95px");

    d3.select("#thickness2")
      .style("margin-left","25%")
      .style("margin-top","95px");

    d3.select("#video2")
      .style("margin-left","25%")
      .style("margin-top","120px");

    d3.select("#rear2")
      .style("margin-left","25%")
      .style("margin-top","145px");

    d3.select("#front2")
      .style("margin-left","25%")
      .style("margin-top","170px");

    d3.select("#storage2")
      .style("margin-left","45%")
      .style("margin-top","-125px");

    d3.select("#memory2")
      .style("margin-left","45%")
      .style("margin-top","195px");

    d3.select("#processor2")
      .style("margin-left","45%")
      .style("margin-top","220px");

    d3.select("#battery2")
      .style("margin-left","45%")
      .style("margin-top","245px");

    d3.select("#finger2")
      .style("margin-left","45%")
      .style("margin-top","270px");

    d3.select("#face2")
      .style("margin-left","45%")
      .style("margin-top","295px");

    d3.select("#dual2")
      .style("margin-left","65%")
      .style("margin-top","-250px");

    d3.select("#sd2")
      .style("margin-left","65%")
      .style("margin-top","320px");

    d3.select("#waterproof2")
      .style("margin-left","65%")
      .style("margin-top","345px");

    d3.select("#jack2")
      .style("margin-left","65%")
      .style("margin-top","370px");
    d3.select("#sim2")
      .style("margin-left","65%")
      .style("margin-top","395px");

    d3.select("#radio_new2")
    .style("margin-left","85%")
    .style("margin-top","-350px");

    d3.select("#radio_old2")
    .style("margin-left","85%")
    .style("margin-top","420px");

    d3.select("#pink_section")
      .style("opacity","0");

    d3.select("#pink_section")
      .style("opacity","1");
    d3.select("#rectangle")
      .style("display","initial");
    d3.select("#adv")
      .style("display","initial");
    console.log("help");
  }

  function shiftSetupAdvanced(){

    console.log("test2");
    let svg = d3.select("#pink_section");
    let height = svg.attr("height");
    let width = svg.attr("width");


    svg.append("g")
    .append("text")
    .text("what else do you care about in your phone?")
    .attr("id","condition")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    // .attr("textLength","300px")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",420);

    svg.append("g")
    .append("line")
    .attr("id","text_line")
    .attr("class","line2")
    .attr("x1","50%")
    .attr("x2","90%")
    .attr("y1","415")
    .attr("y2","415")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");


    svg.append("g")
    .append("line")
    .attr("class","line2")
    .attr("x1","18%")
    .attr("id","budget_line")
    .attr("x2","90%")
    .attr("y1","160")
    .attr("y2","160")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");

    svg.append("g")
    .append("text")
    .text("budget")
    .attr("id","budget")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",165);


    svg.append("g")
    .append("text")
    .text("features")
    .attr("id","features")
    .attr("font-style","italic")
    .attr("font-family", "Nunito")
    .attr("font-size","18px")
    .attr("fill","#969696")
    .attr("text-anchor","start")
    .attr("dominantBaseline","middle")
    .attr("x","10%")
    .attr("y",265);

    svg.append("g")
    .append("line")
    .attr("id","feature_line")
    .attr("class","line2")
    .attr("x1","20%")
    .attr("x2","90%")
    .attr("y1","260")
    .attr("y2","260")
    .attr("stroke","#969696")
    .attr("stroke-linecap","round");



    svg.append("g")
      .append("text")
      .text("Screen Resolution")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Camera Quality")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",325);

    svg.append("g")
      .append("text")
      .text("Screen Size")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",355);

    svg.append("g")
      .append("text")
      .text("Battery")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","11%")
      .attr("y",385);

    svg.append("g")
      .append("text")
      .text("Storage")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",295);

    svg.append("g")
      .append("text")
      .text("Fingerprint Sensor")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",325);

    svg.append("g")
      .append("text")
      .text("3.5mm Audio Jack")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","start")
      .attr("dominantBaseline","middle")
      .attr("x","41%")
      .attr("y",355);

    svg.append("g")
      .append("text")
      .text("newer (2018+)")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","80%")
      .attr("y",290);

    svg.append("g")
      .append("text")
      .text("older")
      .attr("font-family", "Nunito")
      .attr("font-size","12px")
      .attr("fill","#969696")
      .attr("text-anchor","end")
      .attr("dominantBaseline","middle")
      .attr("x","80%")
      .attr("y",320);

    d3.select("#basic_text")
      .style("margin-left","11%")
      .style("margin-top","125px")
      .style("width","78%")
      .style("height","35px")
      .style("border","none")
      .style("border-radius","10px")
      .style("text-indent","10px")
      .style("font-family","Nunito")
      .style("font-style","italic")
      .style("color","#969696")
      .style("background-color","#DCDCDC");

    d3.select("#resolution")
      .style("margin-left","30%")
      .style("margin-top","45px");

    d3.select("#quality")
      .style("margin-left","30%")
      .style("margin-top","75px");

    d3.select("#size")
      .style("margin-left","30%")
      .style("margin-top","105px");

    d3.select("#storage")
      .style("margin-left","30%")
      .style("margin-top","135px");

    d3.select("#fingerprint")
      .style("margin-left","60%")
      .style("margin-top","-90px");

    d3.select("#face")
      .style("margin-left","60%")
      .style("margin-top","165px");

    d3.select("#jack")
      .style("margin-left","60%")
      .style("margin-top","195px");

    d3.select("#radio_new")
    .style("margin-left","85%")
    .style("margin-top","-150px");

    d3.select("#radio_old")
    .style("margin-left","85%")
    .style("margin-top","225px");

    d3.select("#pink_section")
      .style("opacity","0");

    d3.select("#pink_section")
      .style("opacity","1");
    d3.select("#rectangle")
      .style("display","initial");
    d3.select("#advanced")
      .style("display","initial");
    console.log("help");
    clicked = 1;
    setTimeout(function() { fill_blue(); }, 300);
    return false;
  }

  function fill_blue(){
    console.log("filled_blue");
    let svg = d3.select("#blue_section")
    let height = svg.attr("height");
    let width = svg.attr("width");

    svg.append("g")
    .append("text")
    .text("results")
    .attr("id","search_results")
    .attr("font-family", "Nunito")
    .attr("font-size", "20px")
    .attr("fill","#E9E9E9")
    .style("opacity",0)
    .attr("text-anchor","middle")
    .attr("textLength","70px")
    .attr("dominantBaseline","start")
    .attr("x","14%")
    .attr("y",90);

    d3.select("#search_results")
    .transition()
    .style("opacity",1)
    .delay(100);

    d3.select("#blue_section")
    .transition()
    .duration(300)
    .attr("width", "62%");
  }

  function move_svg(level){
    d3.select("#text_line")
    .transition()
    .duration(300)
    .attr("x1","75%");

    d3.select("#budget_line")
    .transition()
    .duration(300)
    .attr("x1","24%");

    if(level==="basic"){
    d3.select("#feature_line")
    .transition()
    .duration(300)
    .attr("x1","25%");
  }
  else{
    d3.select("#feature_line")
    .transition()
    .duration(300)
    .attr("x1","25%");

    d3.selectAll(".features")
      .style("font-size","9px");
    d3.select("#what_else")
      .style("font-size","12px");
    d3.select("#current_phone")
      .style("font-size","12px");
  }

    d3.select("#rectangle")
      .transition()
      .duration(300)
      .attr("height",537)
      .attr("rx",5)
      .attr("ry",5);

    d3.select("#pink_section")
    .transition()
    .duration(300)
    .attr("width", "39%")
    .attr("x","1%");

    d3.select("#button_svg")
    .style("top","65%");

    names = {{names | tojson}};
    urls = {{urls | tojson}};

    let svg = d3.select("#blue_section");
    let ifnext = 0;
    let current = 0;

    if (names.length > 6){
      ifnext = 1;
    }

    svg.append("g")
    .append("text")
    .text("next")
    .attr("id","next")
    .attr("font-family", "Nunito")
    .attr("font-size", "20px")
    .attr("fill","#E9E9E9")
    .style("cursor","pointer")
    .style("opacity",1)
    .attr("text-anchor","middle")
    .attr("dominantBaseline","start")
    .attr("x","85%")
    .attr("y",660)
    .on("click",function(){
      console.log(ifnext);
      console.log(current);
      if(ifnext === 1 && current === 0){
        console.log("success");
        d3.selectAll(".image_text")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".text_image")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".image_text2")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.select("#previous")
          .style("display","initial");

        current = 1;
        if (names.length <= 12){
          ifnext = 0;
        }
        ifprev=1;
      }

      else if (ifnext === 1 && current === 1){
        d3.selectAll(".image_text2")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".image_text3")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");
        current=2;
        ifnext=0;

        d3.select("#next")
          .style("display","none");


      }


    });

    let ifprev = 0;

    svg.append("g")
    .append("text")
    .text("previous")
    .attr("id","previous")
    .attr("font-family", "Nunito")
    .attr("font-size", "20px")
    .attr("fill","#E9E9E9")
    .style("cursor","pointer")
    .style("display","none")
    .attr("text-anchor","middle")
    .attr("dominantBaseline","start")
    .attr("x","75%")
    .attr("y",660)
    .on("click",function(){
      if(ifprev === 1 && current === 1){
        d3.selectAll(".image_text")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".text_image")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".image_text2")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        current = 0;
        ifnext=1;
        ifprev=0;
        d3.select("#previous")
        .style("display","none");
      }

      else if (ifprev === 1 && current === 2){
        d3.selectAll(".image_text2")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".image_text3")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");
        current = 1;
        ifnext=1;

        d3.select("#next")
          .style("display","initial");


      }


    });

    function wrap(text, width, content) {
    text.each(function () {
        var text = d3.select(this),
            words = content.split(/\s+/).reverse(),
            word,
            line = [],
            lineNumber = 0,
            lineHeight = 1.1, // ems
            x = text.attr("x"),
            y = text.attr("y"),
            dy = 0, //parseFloat(text.attr("dy")),
            tspan = text.text(null)
                        .append("tspan")
                        .attr("x", x)
                        .attr("y", y)
                        .attr("dy", dy + "em");
        while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            if (tspan.node().getComputedTextLength() > width) {
                line.pop();
                tspan.text(line.join(" "));
                line = [word];
                tspan = text.append("tspan")
                            .attr("x", x)
                            .attr("y", y)
                            .attr("dy", ++lineNumber * lineHeight + dy + "em")
                            .text(word);
            }
        }
    });
}

    function dialogue(phone,url){
      let svg = d3.select("#back");

      svg.append("g")
        .append("rect")
        .attr("id","dialogue")
        .attr("width","70%")
        .attr("height","100%")
        .attr("rx", 6)
        .attr("ry", 6)
        .attr("x","15%")
        .attr("y","0%")
        .style("fill","#989898")
        .style("opacity","0");

      svg.append('image')
        .attr("id","dialogue_image")
        .attr('xlink:href', url)
        .attr('width', 300)
        .attr('height', 260)
        .style("opacity",0)
        .attr('x',"20%")
        .attr('y',"5%");

      d3.select("#dialogue")
        .transition()
        .duration(500)
        .style("opacity","0.95");

      d3.select("#dialogue_image")
        .transition()
        .duration(500)
        .style("opacity","1");

      return false;


    }




    if(names.length > 0){
      for(let i = 0; i < Math.min(6,names.length); i++){
        svg.append("g")
          .append("rect")
          .attr("class","phones")
          .attr("id",names[i])
          .attr("width", 350)
          .attr("height", 170)
          .attr("rx",5)
          .attr("ry",5)
          .style("fill", "#454545")
          .style("cursor","pointer")
          .attr("dominantBaseline","middle")
          .on("click",function(){dialogue(names[i],urls[i]);})
          .style("opacity","0.25")
          .attr("x",i%2*40+10+"%")
          .attr("y",Math.floor((i/2))%3*27+15 + "%");


        d3.select("#blue_section").append('text')
          .attr("class","image_text")
          .text(names[i])
          .attr("font-family", "Nunito")
          .attr("dominantBaseline","start")
          .style("word-wrap","break-word")
          .style("cursor","pointer")
          .attr("textLength","150px")
          .attr("font-size", "14px")
          .attr("fill","#E9E9E9")
          .on("click",function(){dialogue(names[i],urls[i]);})
          .style("opacity",0)
          .attr("x",i%2*40+30 + "%")
          .attr("y",Math.floor((i/2))%3*27+20 + "%")
          .call(wrap,120,names[i]);

        svg.append("text")
          .text("#" + (i+1))
          .attr("class","text_image")
          .attr("font-family","Nunito")
          .attr("font-size","16px")
          .attr("fill","#E9E9E9")
          .style("cursor","pointer")
          .style("opacity",0)
          .attr("dominantBaseline","start")
          .on("click",function(){dialogue(names[i],urls[i]);})
          .attr('x', i%2*40+11.5+"%")
          .attr('y', Math.floor((i/2))%3*27+19+ "%");

        svg.append('image')
          .attr("class","image_text")
          .attr('xlink:href', urls[i])
          .style("cursor","pointer")
          .on("click",function(){dialogue(names[i],urls[i]);})
          .attr('width', 200)
          .attr('height', 130)
          .style("opacity",0)
          .attr('x', i%2*40+11+"%")
          .attr('y', Math.floor((i/2))%3*27+17 + "%");
      }
      d3.selectAll(".image_text")
      .transition()
      .delay(500)
      .duration(400)
      .style("opacity",1);

      d3.selectAll(".text_image")
      .transition()
      .delay(500)
      .duration(400)
      .style("opacity",1);
    }

      if(names.length > 6){
        for(let i = 6; i < Math.min(12,names.length); i++){
          d3.select("#blue_section").append('text')
            .attr("class","image_text2")
            .text(names[i])
            .attr("font-family", "Nunito")
            .attr("dominantBaseline","start")
            .style("cursor","pointer")
            .style("word-wrap","break-word")
            .attr("textLength","150px")
            .attr("font-size", "14px")
            .attr("fill","#E9E9E9")
            .on("click",function(){dialogue(names[i],urls[i]);})
            .style("display","none")
            .style("opacity",0)
            .attr("x",i%2*40+30 + "%")
            .attr("y",Math.floor((i/2))%3*27+20 + "%")
            .call(wrap,120,names[i]);

          svg.append("text")
            .text("#" + (i+1))
            .attr("class","image_text2")
            .attr("font-family","Nunito")
            .style("cursor","pointer")
            .attr("font-size","16px")
            .on("click",function(){dialogue(names[i],urls[i]);})
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("dominantBaseline","start")
            .attr('x', i%2*40+11.5+"%")
            .attr('y', Math.floor((i/2))%3*27+19+ "%");

          svg.append('image')
            .attr("class","image_text2")
            .style("cursor","pointer")
            .attr('xlink:href', urls[i])
            .attr('width', 200)
            .on("click",function(){dialogue(names[i],urls[i]);})
            .attr('height', 130)
            .style("display","none")
            .style("opacity",0)
            .attr('x', i%2*40+11+"%")
            .attr('y', Math.floor((i/2))%3*27+17 + "%");
        }
      }

      if(names.length > 12){
        for(let i = 12; i < Math.min(18,names.length); i++){
          d3.select("#blue_section").append('text')
            .attr("class","image_text3")
            .text(names[i])
            .attr("font-family", "Nunito")
            .on("click",function(){dialogue(names[i],urls[i]);})
            .style("cursor","pointer")
            .attr("dominantBaseline","start")
            .style("word-wrap","break-word")
            .attr("textLength","150px")
            .attr("font-size", "14px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("x",i%2*40+30 + "%")
            .attr("y",Math.floor((i/2))%3*27+20 + "%")
            .call(wrap,120,names[i]);

          svg.append("text")
            .text("#" + (i+1))
            .style("cursor","pointer")
            .attr("class","image_text3")
            .attr("font-family","Nunito")
            .on("click",function(){dialogue(names[i],urls[i]);})
            .attr("font-size","16px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("dominantBaseline","start")
            .attr('x', i%2*40+11.5+"%")
            .attr('y', Math.floor((i/2))%3*27+19+ "%");

          svg.append('image')
            .attr("class","image_text3")
            .attr('xlink:href', urls[i])
            .style("cursor","pointer")
            .on("click",function(){dialogue(names[i],urls[i]);})
            .attr('width', 200)
            .attr('height', 130)
            .style("display","none")
            .style("opacity",0)
            .attr('x', i%2*40+11+"%")
            .attr('y', Math.floor((i/2))%3*27+17 + "%");
        }
      }





    clicked = 1;
    setTimeout(function() { fill_blue(); }, 300);
    return false;

  }

  function fast_move_svg(level){
    console.log("move_svg");

    d3.select("#text_line")
    .attr("x1","75%");

    d3.select("#budget_line")
    .attr("x1","24%");

    if(level==="basic"){
    d3.select("#feature_line")
    .attr("x1","25%");
  }
  else{
    d3.select("#feature_line")
    .attr("x1","25%");

    d3.selectAll(".features")
      .style("font-size","9px");
    d3.select("#what_else")
      .style("font-size","12px");
    d3.select("#current_phone")
      .style("font-size","12px");
  }
    d3.select("#rectangle")
      .attr("height",537)
      .attr("rx",5)
      .attr("ry",5);

    d3.select("#pink_section")
    .attr("width", "39%")
    .attr("x","1%");

    d3.select("#button_svg")
    .style("top","65%");

    names = {{names | tojson}};
    urls = {{urls | tojson}};

    let svg = d3.select("#blue_section");
    let ifnext = 0;
    let current = 0;

    if (names.length > 6){
      ifnext = 1;
    }

    svg.append("g")
    .append("text")
    .text("next")
    .attr("id","next")
    .attr("font-family", "Nunito")
    .attr("font-size", "20px")
    .attr("fill","#E9E9E9")
    .style("cursor","pointer")
    .style("opacity",1)
    .attr("text-anchor","middle")
    .attr("dominantBaseline","start")
    .attr("x","85%")
    .attr("y",660)
    .on("click",function(){
      console.log(ifnext);
      console.log(current);
      if(ifnext === 1 && current === 0){
        console.log("success");
        d3.selectAll(".image_text")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".text_image")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".image_text2")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.select("#previous")
          .style("display","initial");

        current = 1;
        if (names.length <= 12){
          ifnext = 0;
        }
        ifprev=1;
      }

      else if (ifnext === 1 && current === 1){
        d3.selectAll(".image_text2")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        d3.selectAll(".image_text3")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");
        current=2;
        ifnext=0;

        d3.select("#next")
          .style("display","none");


      }


    });

    let ifprev = 0;

    svg.append("g")
    .append("text")
    .text("previous")
    .attr("id","previous")
    .attr("font-family", "Nunito")
    .attr("font-size", "20px")
    .attr("fill","#E9E9E9")
    .style("cursor","pointer")
    .style("display","none")
    .attr("text-anchor","middle")
    .attr("dominantBaseline","start")
    .attr("x","75%")
    .attr("y",660)
    .on("click",function(){
      if(ifprev === 1 && current === 1){
        d3.selectAll(".image_text")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".text_image")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".image_text2")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");

        current = 0;
        ifnext=1;
        ifprev=0;
        d3.select("#previous")
        .style("display","none");
      }

      else if (ifprev === 1 && current === 2){
        d3.selectAll(".image_text2")
        .transition()
        .delay(300)
        .duration(200)
        .style("opacity",1)
        .style("display","initial");

        d3.selectAll(".image_text3")
        .transition()
        .duration(200)
        .style("opacity",0)
        .style("display","none");
        current = 1;
        ifnext=1;

        d3.select("#next")
          .style("display","initial");


      }


    });

    function wrap(text, width, content) {
    text.each(function () {
        var text = d3.select(this),
            words = content.split(/\s+/).reverse(),
            word,
            line = [],
            lineNumber = 0,
            lineHeight = 1.1, // ems
            x = text.attr("x"),
            y = text.attr("y"),
            dy = 0, //parseFloat(text.attr("dy")),
            tspan = text.text(null)
                        .append("tspan")
                        .attr("x", x)
                        .attr("y", y)
                        .attr("dy", dy + "em");
        while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            if (tspan.node().getComputedTextLength() > width) {
                line.pop();
                tspan.text(line.join(" "));
                line = [word];
                tspan = text.append("tspan")
                            .attr("x", x)
                            .attr("y", y)
                            .attr("dy", ++lineNumber * lineHeight + dy + "em")
                            .text(word);
            }
        }
    });
}



    if(names.length > 0){
      for(let i = 0; i < Math.min(6,names.length); i++){
        svg.append("g")
          .append("rect")
          .attr("class","phones")
          .attr("width", 350)
          .attr("height", 170)
          .attr("rx",5)
          .attr("ry",5)
          .style("fill", "#454545")
          .attr("dominantBaseline","middle")
          .style("cursor","pointer")
          .style("opacity","0.25")
          .attr("x",i%2*40+10+"%")
          .attr("y",Math.floor((i/2))%3*27+15 + "%");
          // .on("click",function(){setupAdvanced();});

        d3.select("#blue_section").append('text')
          .attr("class","image_text")
          .text(names[i])
          .attr("font-family", "Nunito")
          .attr("dominantBaseline","start")
          .style("word-wrap","break-word")
          .attr("textLength","150px")
          .attr("font-size", "14px")
          .attr("fill","#E9E9E9")
          .style("opacity",0)
          .attr("x",i%2*40+30 + "%")
          .attr("y",Math.floor((i/2))%3*27+20 + "%")
          .call(wrap,120,names[i]);

        svg.append("text")
          .text("#" + (i+1))
          .attr("class","text_image")
          .attr("font-family","Nunito")
          .attr("font-size","16px")
          .attr("fill","#E9E9E9")
          .style("opacity",0)
          .attr("dominantBaseline","start")
          .attr('x', i%2*40+11.5+"%")
          .attr('y', Math.floor((i/2))%3*27+19+ "%");

        svg.append('image')
          .attr("class","image_text")
          .attr('xlink:href', urls[i])
          .attr('width', 200)
          .attr('height', 130)
          .style("opacity",0)
          .attr('x', i%2*40+11+"%")
          .attr('y', Math.floor((i/2))%3*27+17 + "%");
      }
      d3.selectAll(".image_text")
      .transition()
      .delay(500)
      .duration(400)
      .style("opacity",1);

      d3.selectAll(".text_image")
      .transition()
      .delay(500)
      .duration(400)
      .style("opacity",1);
    }

      if(names.length > 6){
        for(let i = 6; i < Math.min(12,names.length); i++){
          d3.select("#blue_section").append('text')
            .attr("class","image_text2")
            .text(names[i])
            .attr("font-family", "Nunito")
            .attr("dominantBaseline","start")
            .style("word-wrap","break-word")
            .attr("textLength","150px")
            .attr("font-size", "14px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("x",i%2*40+30 + "%")
            .attr("y",Math.floor((i/2))%3*27+20 + "%")
            .call(wrap,120,names[i]);

          svg.append("text")
            .text("#" + (i+1))
            .attr("class","image_text2")
            .attr("font-family","Nunito")
            .attr("font-size","16px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("dominantBaseline","start")
            .attr('x', i%2*40+11.5+"%")
            .attr('y', Math.floor((i/2))%3*27+19+ "%");

          svg.append('image')
            .attr("class","image_text2")
            .attr('xlink:href', urls[i])
            .attr('width', 200)
            .attr('height', 130)
            .style("display","none")
            .style("opacity",0)
            .attr('x', i%2*40+11+"%")
            .attr('y', Math.floor((i/2))%3*27+17 + "%");
        }
      }

      if(names.length > 12){
        for(let i = 12; i < Math.min(18,names.length); i++){
          d3.select("#blue_section").append('text')
            .attr("class","image_text3")
            .text(names[i])
            .attr("font-family", "Nunito")
            .attr("dominantBaseline","start")
            .style("word-wrap","break-word")
            .attr("textLength","150px")
            .attr("font-size", "14px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("x",i%2*40+30 + "%")
            .attr("y",Math.floor((i/2))%3*27+20 + "%")
            .call(wrap,120,names[i]);

          svg.append("text")
            .text("#" + (i+1))
            .attr("class","image_text3")
            .attr("font-family","Nunito")
            .attr("font-size","16px")
            .attr("fill","#E9E9E9")
            .style("display","none")
            .style("opacity",0)
            .attr("dominantBaseline","start")
            .attr('x', i%2*40+11.5+"%")
            .attr('y', Math.floor((i/2))%3*27+19+ "%");

          svg.append('image')
            .attr("class","image_text3")
            .attr('xlink:href', urls[i])
            .attr('width', 200)
            .attr('height', 130)
            .style("display","none")
            .style("opacity",0)
            .attr('x', i%2*40+11+"%")
            .attr('y', Math.floor((i/2))%3*27+17 + "%");
        }
      }





    clicked = 1;
    setTimeout(function() { fill_blue(); }, 300);
    return false;

  }
  if("{{check}}" === "True" && "{{flag}}" === "True"){
    shiftSetupAdvanced();
    // setup();
    fast_move_svg("basic");
  }
  else if ("{{check}}" === "True"){
    shiftSetupAdvanced();
    // setup();
    move_svg("basic");
  }
  else if("{{check2}}" === "True" && "{{flag2}}" === "True"){
    shiftSetup();
    fast_move_svg("notbasic");
  }
  else if("{{check2}}" === "True"){
    shiftSetup();
    move_svg("notbasic");
  }else{
    intro();
  }





</script>
</body>

</html>
